#!/usr/bin/env python
'''
checking some particular ports
if open then we can proceed further
and putting the open ports
information on some file
'''
import nmap
ports = [21, 22, 23, 80, 443, 445, 8080, 3389]
def fTgts(IP):
    nscan = nmap.PortScanner()
    t=[]
    for i in ports:
        nscan.scan(IP,str(i))
        if nscan[IP].has_tcp(i):
            state = nscan[IP]['tcp'][i]['state']
            if state == 'open':
		print 'open port'+str(i)
                t.append(i)
    return t
IP = ''             #IP of the host webserver
k = fTgts(IP)
f=open('/home/shikhar/Documents/python-cdac/Open_Ports.txt','w')
st=''
for i in k:
    st=st+str(i)+'\n'
f.write(st)
f.close()

